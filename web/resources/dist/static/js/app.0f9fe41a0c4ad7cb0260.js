webpackJsonp([2],{"9V60":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={name:"ContainerMain",computed:{key:function(){return void 0!==this.$route.name?this.$route.name+ +new Date:this.$route+ +new Date}}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"app-main"},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view",{key:this.key})],1)],1)},staticRenderFns:[]},i=n("VU/8")(r,o,!1,null,null,null);e.default=i.exports},AkUR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Z014"),o=n("hx2r"),i=n("9V60"),a={name:"layout",data:function(){return{showBar:!0}},created:function(){this.showBar=!location.hash.includes("out_visit=true")},components:{TopHeader:r.default,LeftNav:o.default,ContainerMain:i.default}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[t.showBar?n("el-header",{staticStyle:{position:"fixed",width:"100%",top:"0",left:"0","z-index":"100",background:"#00BF6C"}},[n("top-header")],1):t._e(),t._v(" "),n("el-container",{staticStyle:{background:"#fff",position:"flex","justify-content":"space-between"}},[t.showBar?n("el-aside",{staticStyle:{position:"fixed",top:"60px",left:"0","overflow-y":"auto",height:"100%",background:"rgb(68, 78, 79)"},attrs:{width:"130px"}},[n("left-nav")],1):t._e(),t._v(" "),n("el-main",{staticClass:"main-style",style:{marginLeft:t.showBar?"130px":"0",marginTop:t.showBar?"60px":"0"}},[n("container-main")],1)],1)],1)},staticRenderFns:[]};var c=n("VU/8")(a,s,!1,function(t){n("c3a8")},null,null);e.default=c.exports},HNM5:function(t,e,n){"use strict";var r=n("//Fk"),o=n.n(r),i=n("mtWM"),a=n.n(i),s=n("zL8q"),c=(n.n(s),n("TIfe")),u=a.a.create({});u.interceptors.request.use(function(t){var e=Object(c.a)()||"tokenIsEmpty";return e&&(t.headers["X-Token"]=e),t},function(t){o.a.reject(t)}),u.interceptors.response.use(function(t){var e=t.data;return 1==e.ret?e.data:(2==e.ret&&(Object(c.b)(),window.open("/","_self")),Object(s.Message)({message:(e.error||{}).message||"暂未找到接口服务",type:"error",duration:5e3}),o.a.reject(e.error))},function(t){return console.warn("获取接口数据报错："+t),o.a.reject(t)}),e.a=u},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),o=n("zL8q"),i=n.n(o),a=(n("d4SV"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]});var s=n("VU/8")({name:"App",created:function(){},methods:{}},a,!1,function(t){n("SOFi")},null,null).exports,c=n("/ocq"),u=n("AkUR");r.default.use(c.a);var l=function(t){return function(e){return n.e(0).then(function(){var r=[n("EtAD")("./"+t+".vue")];e.apply(null,r)}.bind(this)).catch(n.oe)}},f=new c.a({routes:[{path:"/login",component:l("login/login"),hidden:!0},{path:"/register",component:l("login/register"),hidden:!0},{path:"/",name:"Home",redirect:"/control/index"},{path:"/control",component:u.default,children:[{path:"index",component:l("control/index")},{path:"api",name:"ApiData",component:l("control/apiList")},{path:"backups",name:"Backups",component:l("control/apiInfo")},{path:"userinfo",name:"userinfo",component:l("control/userInfo")}]},{path:"/404",component:l("error/404"),hidden:!0},{path:"*",redirect:"/404",hidden:!0}]}),p=n("//Fk"),d=n.n(p),h=n("2aIq"),m=n.n(h),v=n("NYxO"),g={userInfo:function(t){return t.userInfo}},_=n("gyMJ"),y=n("TIfe");r.default.use(v.a);var b={Login:function(t,e){m()(t);var n=e.userName.trim();return new d.a(function(t,r){Object(_.b)({userName:n,passWord:e.passWord}).then(function(e){var n=e.token;Object(y.c)(n),t()}).catch(function(t){r(t)})})},GetUserInfo:function(t){var e=t.commit;return new d.a(function(t,n){Object(_.a)().then(function(n){e("setUserInfo",n),t(n)}).catch(function(t){n(t)})})},FedLogOut:function(t){var e=t.commit;return new d.a(function(t){e("setUserInfo",{}),Object(y.b)(),Object(o.Message)({message:"正在退出",type:"warning"}),setTimeout(function(){t()},1e3)})},setStore_activeHost:function(t,e){(0,t.commit)("setActiveHost",e)},setStore_activeApiUrl:function(t,e){(0,t.commit)("setActiveApiUrl",e)},clearStore_activeApiUrl:function(t){(0,t.commit)("clearActiveApiUrl")},setStore_historyApiList:function(t,e){(0,t.commit)("setHistoryApiList",{url:e.url,desc:e.desc})},clearStore_historyApiList:function(t){(0,t.commit)("clearHistoryApiList")}},x=new v.a.Store({state:{userInfo:null,activeHost:"",activeApiUrl:"",historyApiList:[]},mutations:{setUserInfo:function(t,e){t.userInfo=e},setActiveHost:function(t,e){t.activeHost=e},setActiveApiUrl:function(t,e){t.activeApiUrl=e},clearActiveApiUrl:function(t,e){t.activeApiUrl=""},setHistoryApiList:function(t,e){var n=e.url,r=e.desc;if(!(n.length<2)){var o=t.historyApiList.filter(function(t){return t.url!=n});o.unshift({url:n,desc:r}),t.historyApiList=o}},clearHistoryApiList:function(t){t.historyApiList=[]}},actions:b,modules:{},getters:g}),A=this,w=["/login","/register"];f.beforeEach(function(t,e,n){Object(y.a)()?"/login"===t.path?n({path:"/"}):(x.getters.userInfo||x.dispatch("GetUserInfo").catch(function(t){A.$message.error("获取用户信息失败")}),n()):-1!==w.indexOf(t.path)?n():n("/login")}),r.default.config.productionTip=!1,r.default.use(i.a),new r.default({el:"#app",router:f,store:x,components:{App:s},template:"<App/>"})},SOFi:function(t,e){},TIfe:function(t,e,n){"use strict";e.a=function(){return o.a.get(i)},e.c=function(t){return o.a.set(i,t)},e.b=function(){return o.a.remove(i)};var r=n("lbHh"),o=n.n(r),i="api-house-token"},Z014:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Dd8w"),o=n.n(r),i=n("NYxO"),a={name:"TopBar",computed:o()({},Object(i.c)(["userInfo"])),created:function(){this.getCityList()},data:function(){return{projectName:"api-proxy-house",citySearchInput:"",cityList:[]}},methods:{getCityList:function(){},logout:function(){var t=this;this.$store.dispatch("FedLogOut").then(function(e){t.$router.push({path:"/login"})}).catch(function(t){console.warn("api LogOut:",t)})}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{staticStyle:{color:"#fff","margin-left":"10px"}},[t._v(t._s(t.projectName))]),t._v(" "),n("div",{staticStyle:{float:"right"}},[n("el-button",{staticStyle:{color:"#fff"},attrs:{type:"text"},on:{click:function(e){t.logout()}}},[t._v("退出")])],1),t._v(" "),n("div",{staticStyle:{float:"right","margin-right":"20px",cursor:"pointer"}}),t._v(" "),n("div",{staticStyle:{color:"#fff",float:"right","font-size":"14px","margin-right":"20px"}},[n("span",[t._v(t._s(t.userInfo.userName))])])])},staticRenderFns:[]},c=n("VU/8")(a,s,!1,null,null,null);e.default=c.exports},c3a8:function(t,e){},d4SV:function(t,e){},gyMJ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return i}),e.c=function(t){return Object(r.a)({url:"/_house_api/register",method:"post",data:t})};var r=n("HNM5"),o=function(t){return Object(r.a)({url:"/_house_api/login",method:"post",data:t})},i=function(){return Object(r.a)({url:"/_house_api/getUserInfo",method:"post"})}},hx2r:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100%"}},[n("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{"min-height":"600px"},attrs:{"default-active":t.$route.path,"background-color":"#444E4F","text-color":"#fff","active-text-color":"#00BF6C"}},[n("router-link",{attrs:{to:"/control/index"}},[n("el-menu-item",{attrs:{index:"/control/index"}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("域名列表")])])],1),t._v(" "),n("router-link",{attrs:{to:"/control/api"}},[n("el-menu-item",{attrs:{index:"/control/api"}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("接口列表")])])],1),t._v(" "),n("router-link",{attrs:{to:"/control/backups"}},[n("el-menu-item",{attrs:{index:"/control/backups"}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("接口详情")])])],1),t._v(" "),n("router-link",{attrs:{to:"/control/userinfo"}},[n("el-menu-item",{attrs:{index:"/control/userinfo"}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("个人信息")])])],1)],1)],1)},staticRenderFns:[]},o=n("VU/8")({name:"LeftNav",computed:{}},r,!1,null,null,null);e.default=o.exports}},["NHnr"]);
//# sourceMappingURL=app.0f9fe41a0c4ad7cb0260.js.map